<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>TimeLock Viewer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>TimeLock Viewer</h1>

<div id="estado">Cargando...</div>
<pre id="contenido" style="white-space: pre-wrap; margin-top:20px;"></pre>

<script>
async function cargar() {
    try {
        const configRes = await fetch("config.json");
        const config = await configRes.json();

        const fechaDesbloqueo = new Date(config.unlockDate);
        const ahora = new Date();

        if (ahora < fechaDesbloqueo) {
            document.getElementById("estado").innerHTML =
                "üîí Contenido bloqueado hasta:<br><b>" + fechaDesbloqueo.toLocaleString() + "</b>";
            return;
        }

        const textoRes = await fetch(config.file);
        const texto = await textoRes.text();

        document.getElementById("estado").innerHTML = "‚úÖ Contenido desbloqueado:";
        document.getElementById("contenido").innerText = texto;

    } catch (err) {
        document.getElementById("estado").innerHTML = "‚ùå Error cargando el contenido.";
    }
}

cargar();
</script>

</body>
</html>